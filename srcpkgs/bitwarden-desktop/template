# Template file for 'bitwarden-desktop'
pkgname=bitwarden-desktop
version=2026.1.0
revision=1
archs="x86_64"
hostmakedepends="tar xz"
makedepends=""
depends="gtk+3 alsa-lib cups libXtst libXScrnSaver nss"
short_desc="Bitwarden desktop client"
maintainer="Naz <ndpm13@ch-naeseem.com>"
license="GPL-3.0"
homepage="https://bitwarden.com/"
distfiles="https://github.com/bitwarden/clients/releases/download/desktop-v${version}/Bitwarden-${version}-amd64.deb"
checksum=6db36b2ed691901483a1c2355bdef5ca102a1f53a26cf4be2173b9e1a4b252e5

do_extract() {
    mkdir -p ${DESTDIR}
    ar x ${XBPS_SRCDISTDIR}/${pkgname}-${version}/Bitwarden-${version}-amd64.deb
    tar xf data.tar.xz -C ${DESTDIR}
}

do_install() {
    vmkdir usr/bin
    ln -sf /opt/Bitwarden/bitwarden ${DESTDIR}/usr/bin/bitwarden

    chmod 4755 ${DESTDIR}/opt/Bitwarden/chrome-sandbox
}
