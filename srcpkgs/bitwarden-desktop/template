# Template file for 'bitwarden-desktop'
pkgname=bitwarden-desktop
version=2025.11.0
revision=1
archs="x86_64"
hostmakedepends="tar xz"
makedepends=""
depends="gtk+3 alsa-lib cups libXtst libXScrnSaver nss"
short_desc="Bitwarden desktop client"
maintainer="Naz <ndpm13@ch-naeseem.com>"
license="GPL-3.0"
homepage="https://bitwarden.com/"
distfiles="https://github.com/bitwarden/clients/releases/download/desktop-v${version}/Bitwarden-${version}-amd64.deb"
checksum=33d4e72f7a56a9f8c0a30b115acc842783cb11ac0a23f1cc384a6a282d34eef9

do_extract() {
    mkdir -p ${DESTDIR}
    ar x ${XBPS_SRCDISTDIR}/${pkgname}-${version}/Bitwarden-${version}-amd64.deb
    tar xf data.tar.xz -C ${DESTDIR}
}

do_install() {
    vmkdir usr/bin
    ln -sf /opt/Bitwarden/bitwarden ${DESTDIR}/usr/bin/bitwarden

    chmod 4755 ${DESTDIR}/opt/Bitwarden/chrome-sandbox
}
