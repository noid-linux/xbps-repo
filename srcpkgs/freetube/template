# Template file for 'freetube'
pkgname=freetube
version=0.23.13
revision=3
archs="x86_64"
hostmakedepends="nodejs"
depends="electron35"
short_desc="An open source desktop YouTube player built with privacy in mind."
maintainer="Naz <ndpm13@ch-naseem.com>"
license="AGPL-3.0"
homepage="https://freetubeapp.io/"
distfiles="https://github.com/FreeTubeApp/FreeTube/archive/refs/tags/v${version}-beta.tar.gz"
checksum=c87088f5e88ac85a12beb700965760dc1539e3726cfd260f52ed151fc9cbfc85

pre_build() {
	npm i
}

do_build() {
	npm run build
}

do_install() {
	vcopy build/linux-unpacked/ /usr/lib/freetube
  	vcopy build/linux-unpacked/resources/app.asar /usr/lib/freetube

	vbin ${FILESDIR}/freetube.sh freetube

	vinstall ${FILESDIR}/freetube.desktop 644 usr/share/applications
	vinstall _icons/icon.svg 644 usr/share/pixmaps freetube.svg
}