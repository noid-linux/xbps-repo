# Template file for 'vscodium'
pkgname=vscodium
version=1.109.41146
revision=2
archs="x86_64"
depends="fontconfig libXtst libnotify libXScrnSaver"
short_desc="Free/Libre Open Source Software Binaries of VSCode"
maintainer="Naz <ndpm13@ch-naeseem.com>"
license="MIT"
homepage="https://vscodium.com/"
distfiles="https://github.com/VSCodium/vscodium/releases/download/${version}/VSCodium-linux-x64-${version}.tar.gz"
checksum="6d25f29f2b7aeb814179c005e8902afe5c66f8e97f0d1db542e3bc62fdc4ec5b"
nostrip=yes

do_install() {
	vmkdir opt/${pkgname}
	vcopy "*" opt/${pkgname}

	chmod 4755 ${DESTDIR}/opt/${pkgname}/chrome-sandbox

	vbin ${FILESDIR}/vscodium.sh codium
	ln -sf /usr/bin/codium ${DESTDIR}/usr/bin/vscodium

	vinstall ${FILESDIR}/vscodium.desktop 644 usr/share/applications
	vinstall ${FILESDIR}/vscodium-url-handler.desktop 644 usr/share/applications

	vinstall resources/app/resources/linux/code.png 644 usr/share/pixmaps vscodium.png
	vinstall ${FILESDIR}/vscodium.svg 644 usr/share/icons/hicolor/scalable/apps

	vmkdir usr/share/zsh/site-functions
	vmkdir usr/share/bash-completion/completions
	ln -sf /opt/${pkgname}/resources/completions/zsh/_codium ${DESTDIR}/usr/share/zsh/site-functions/
	ln -sf /opt/${pkgname}/resources/completions/bash/codium ${DESTDIR}/usr/share/bash-completion/completions/
}